#!/bin/bash

# Mac Agent μ „μ—­ λ…λ Ήμ–΄ μ¤ν¬λ¦½νΈ
# μ‚¬μ©λ²•: mac_agent "λ…λ Ήμ–΄"

# μ¤ν¬λ¦½νΈμ μ‹¤μ  μ„μΉ μ°ΎκΈ° (μ‹¬λ³Όλ¦­ λ§ν¬ ν•΄κ²°)
if [ -L "${BASH_SOURCE[0]}" ]; then
    # μ‹¬λ³Όλ¦­ λ§ν¬μΈ κ²½μ° μ‹¤μ  νμΌ κ²½λ΅ μ°ΎκΈ°
    SCRIPT_PATH=$(readlink "${BASH_SOURCE[0]}")
    SCRIPT_DIR="$(cd "$(dirname "$SCRIPT_PATH")" && pwd)"
else
    # μΌλ° νμΌμΈ κ²½μ°
    SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
fi

APP_DIR="$SCRIPT_DIR/app"

# app λ””λ ‰ν† λ¦¬κ°€ μ΅΄μ¬ν•λ”μ§€ ν™•μΈ
if [ ! -d "$APP_DIR" ]; then
    echo "β μ¤λ¥: app λ””λ ‰ν† λ¦¬λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤."
    echo "ν„μ¬ μ„μΉ: $SCRIPT_DIR"
    echo "μ°Ύλ” μ„μΉ: $APP_DIR"
    exit 1
fi

# main.py νμΌμ΄ μ΅΄μ¬ν•λ”μ§€ ν™•μΈ
if [ ! -f "$APP_DIR/main.py" ]; then
    echo "β μ¤λ¥: main.py νμΌμ„ μ°Ύμ„ μ μ—†μµλ‹λ‹¤."
    echo "μμƒ μ„μΉ: $APP_DIR/main.py"
    exit 1
fi

# μΈμκ°€ μ κ³µλμ—λ”μ§€ ν™•μΈ
if [ $# -eq 0 ]; then
    echo "π¤– Mac Agent - μ§€λ¥ν• μΊλ¦°λ” μ—μ΄μ „νΈ"
    echo ""
    echo "μ‚¬μ©λ²•:"
    echo "  mac_agent \"λ…λ Ήμ–΄\"                    # λ‹¨μΌ λ…λ Ήμ–΄ μ‹¤ν–‰"
    echo "  mac_agent -t                          # ν…μ¤νΈ λ¨λ“"
    echo "  mac_agent -i                          # λ€ν™”ν• λ¨λ“"
    echo ""
    echo "μμ‹:"
    echo "  mac_agent \"6μ›” 30μΌ μ¤ν›„ 4μ‹ - ν€ λ―Έν…\""
    echo "  mac_agent \"ν€ λ―Έν… μΌμ • μ°Ύμ•„μ¤\""
    echo "  mac_agent \"λ‚΄μΌ μ•½μ† μ‚­μ ν•΄μ¤\""
    exit 0
fi

# app λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ν•μ—¬ μ‹¤ν–‰
cd "$SCRIPT_DIR/app" && python main.py -c "$1"